{ "public_id": "26f-x8i-pzm", "name": "[Zendesk] Transactional", "status": "live", "type": "api", "tags": [ "metrist-identifier:zendesk-transactional" ], "created_at": "2023-02-17T22:40:04.275778+00:00", "modified_at": "2023-03-01T17:11:43.392100+00:00", "config": { "configVariables": [ { "displayName": "API Token", "description": "The API token to use.", "name": "API_TOKEN", "secure": true, "type": "text" }, { "displayName": "Subject", "description": "The subject for automatically created tickets.", "name": "SUBJECT", "secure": false, "example": "9ab7dd8e-00e1-45f8-8126-b441e6a5b4f2", "pattern": "{{ uuid }}", "type": "text" }, { "displayName": "Subdomain", "description": "Subdomain to run api calls against. E.g. `metrist` for https://metrist.zendesk.com/api", "name": "SUBDOMAIN", "secure": false, "example": "canary-monitoring", "pattern": "canary-monitoring", "type": "text" } ], "steps": [ { "id": "3fz-453-24f", "name": "CreateTicket", "subtype": "http", "extractedValues": [ { "type": "http_body", "parser": { "type": "json_path", "value": "$.ticket.id" }, "name": "TICKET_ID", "secure": false } ], "allowFailure": false, "isCritical": true, "retry": { "count": 0, "interval": 300 }, "assertions": [ { "operator": "lessThan", "type": "responseTime", "target": 1000 }, { "operator": "is", "type": "statusCode", "target": 201 } ], "request": { "method": "POST", "url": "https://{{ SUBDOMAIN }}.zendesk.com/api/v2/tickets.json", "body": "{\n  \"ticket\": {\n    \"subject\": \"{{ SUBJECT }}\",\n    \"comment\": {\n      \"body\": \"Testing\"\n    },\n    \"tags\": [\"metrist_monitor\"]\n  }\n}", "bodyType": "application/json", "headers": { "Authorization": "Basic {{ API_TOKEN }}", "content-type": "application/json" }, "httpVersion": "any" } }, { "id": "8bh-wa9-jhp", "name": "DeleteTicket", "subtype": "http", "extractedValues": [], "allowFailure": false, "isCritical": true, "retry": { "count": 3, "interval": 300 }, "assertions": [ { "operator": "is", "type": "statusCode", "target": 204 } ], "request": { "method": "DELETE", "url": "https://{{ SUBDOMAIN }}.zendesk.com/api/v2/tickets/{{ TICKET_ID }}.json", "headers": { "Authorization": "Basic {{ API_TOKEN }}" }, "httpVersion": "any" } }, { "id": "5pg-s6p-54p", "name": "PermanentlyDeleteTicket", "subtype": "http", "extractedValues": [], "allowFailure": false, "isCritical": true, "retry": { "count": 3, "interval": 300 }, "assertions": [ { "operator": "is", "type": "statusCode", "target": 200 } ], "request": { "method": "DELETE", "url": "https://{{ SUBDOMAIN }}.zendesk.com/api/v2/deleted_tickets/{{ TICKET_ID }}.json", "headers": { "Authorization": "Basic {{ API_TOKEN }}" }, "httpVersion": "any" } } ] }, "message": "", "options": { "tick_every": 300, "min_failure_duration": 0, "min_location_failed": 1, "retry": { "count": 0, "interval": 300 }, "monitor_options": { "renotify_interval": 0 } }, "locations": [ "aws:us-west-1" ], "subtype": "multi", "monitor_id": 111233507, "creator": { "name": "Ryan Duffield", "handle": "prod@metrist.io", "email": "prod@metrist.io" } }
